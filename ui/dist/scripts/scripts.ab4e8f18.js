"use strict";var issuemyvisaApp=angular.module("issuemyvisaApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngGrid"]);issuemyvisaApp.config(["$httpProvider","$routeProvider",function(a,b){a.interceptors.push(["$q","$rootScope",function(a,b){return{request:function(c){return b.$broadcast("loading-started"),c||a.when(c)},response:function(c){return b.$broadcast("loading-complete"),c||a.when(c)}}}]),b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),issuemyvisaApp.directive("loadingIndicator",function(){return{restrict:"A",template:'<i class="fa fa-cog fa-spin"></i> Loading...',link:function(a,b){a.$on("loading-started",function(){b.css({display:""})}),a.$on("loading-complete",function(){b.css({display:"none"})})}}}),issuemyvisaApp.factory("appConfig",function(){return{apiRootUrl:"http://issuemyvisa.today/api/v1"}}),angular.module("issuemyvisaApp").controller("MainCtrl",["$scope","$log","$http","appConfig",function(a,b,c,d){a.paging={page:0,limit:10,total:0},a.getData=function(e,f){c.jsonp(d.apiRootUrl+"/view/all/"+f+"/"+e+"?callback=JSON_CALLBACK").success(function(b){a.data=b.data,a.paging.total=b.total_pages}).error(function(a){b.error(a)})},a.getData(a.paging.page,a.paging.limit),a.pageNewer=function(){0!=a.paging.page&&(a.paging.page-=1,a.getData(a.paging.page,a.paging.limit))},a.pageOlder=function(){a.paging.page!=a.paging.total-1&&(a.paging.page+=1,a.getData(a.paging.page,a.paging.limit))},a.hasNewer=function(){return a.paging.page>0?"":"disabled"},a.hasOlder=function(){return a.paging.page<a.paging.total-1?"":"disabled"},a.gridOptions={data:"data",enableCellSelection:!1,enableRowSelection:!0,multiSelect:!1,jqueryUITheme:!0,enableHighlighting:!0,enablePaging:!1,columnDefs:[{field:"yearmonth",displayName:"Date",cellTemplate:'<div class="ngCellText" ng-class="col.colIndex()"><a href="{{row.getProperty(col.field)}}">{{row.getProperty(col.field)}}</a></div>'},{field:"clear",displayName:"Cleared"},{field:"pending",displayName:"Pending"},{field:"rejected",displayName:"Rejected"},{field:"total",displayName:"Total"},{field:"avg_wait",displayName:"Avg. Wait"}],showFooter:!0,footerTemplate:'<div ng-show="showFooter"><ul class="pager"><li class="previous" ng-class="[hasNewer()]" ng-click="pageNewer()"><a href="">&larr; Newer</a></li><li class="next" ng-class="[hasOlder()]" ng-click="pageOlder()"><a href="">Older &rarr;</a></li></ul></div>'}}]),angular.module("issuemyvisaApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);